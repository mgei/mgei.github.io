<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Also published on RPubs: https://rpubs.com/mgei/china-us-trade
 What we shall answer  What’s the total annual US import and export? Who are the main trading partners? How’s the picture for China? Import and exports? A look at the GDP growth What type of goods are traded?   UN Comtrade UN Comtrade is a repository of official international trade statistics and relevant analytical tables. It allows to view and download detailed global trade data, i.'>
<meta name='theme-color' content='#ffb266'>

<meta property='og:title' content='A closer look at the China-US trade • Martin Geissmann'>
<meta property='og:description' content='Also published on RPubs: https://rpubs.com/mgei/china-us-trade
 What we shall answer  What’s the total annual US import and export? Who are the main trading partners? How’s the picture for China? Import and exports? A look at the GDP growth What type of goods are traded?   UN Comtrade UN Comtrade is a repository of official international trade statistics and relevant analytical tables. It allows to view and download detailed global trade data, i.'>
<meta property='og:url' content='https://mgei.github.io/post/china-us-trade/'>
<meta property='og:site_name' content='mgei.github.io'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/a525a84fae399669fa8861e2661df00b?s=256'><meta property='article:section' content='post'><meta property='article:tag' content='R'><meta property='article:tag' content='economics'><meta property='article:tag' content='USA'><meta property='article:tag' content='China'><meta property='article:tag' content='world trade'><meta property='article:tag' content='comtradr'><meta property='article:published_time' content='2019-05-27T00:00:00Z'/><meta property='article:modified_time' content='2019-05-27T00:00:00Z'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.55.5" />

  <title>A closer look at the China-US trade • Martin Geissmann</title>
  <link rel='canonical' href='https://mgei.github.io/post/china-us-trade/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.fb20af92.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#ffb266;}
</style>

  

</head>
<body class='page type-post has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/'>
      mgei.github.io
      </a>
    </h2>
    <div class='desc'>
    personal archive
    </div>
  </header>

</section>
<section class='widget widget-sidebar_menu sep-after'><nav id='sidebar-menu' class='menu sidebar-menu' aria-label='Sidebar Menu'>
    <div class='container'>
      <ul><li class='item'>
  <a href='/'>Home</a></li><li class='item'>
  <a href='/post/'>Archive</a></li><li class='item'>
  <a href='/tags/'>Tags</a></li><li class='item'>
  <a href='/search/'>Search</a></li><li class='item'>
  <a href='/about/'>About</a></li></ul>
    </div>
  </nav>

</section></div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button><div class='header-widgets'>
        <div class='container'>
    
    <style>.widget-breadcrumbs li:after{content:'\2f '}</style>
  <section class='widget widget-breadcrumbs sep-after'>
    <nav id='breadcrumbs'>
      <ol><li><a href='/'>Home</a></li><li><span>A closer look at the China-US trade</span></li></ol>
    </nav>
  </section></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>mgei.github.io</p><p class='desc site-desc'>personal archive</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>A closer look at the China-US trade</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2019-05-27T00:00:00Z'>27 May 2019</time>
</span>

  <span class='byline'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M21,21V20c0-2.76-4-5-9-5s-9,2.24-9,5v1"/>
  <path d="M16,6.37A4,4,0,1,1,12.63,3,4,4,0,0,1,16,6.37Z"/>
  
</svg>
<span class='screen-reader-text'> by </span><a href='/authors/mgei'>Martin Geissmann</a></span>
  

</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<link href="/rmarkdown-libs/vis/vis.css" rel="stylesheet" />
<script src="/rmarkdown-libs/vis/vis.min.js"></script>
<script src="/rmarkdown-libs/visNetwork-binding/visNetwork.js"></script>


<blockquote>
<p>Also published on RPubs: <a href="https://rpubs.com/mgei/china-us-trade" class="uri">https://rpubs.com/mgei/china-us-trade</a></p>
</blockquote>
<div id="what-we-shall-answer" class="section level1">
<h1>What we shall answer</h1>
<ul>
<li>What’s the total annual US import and export?</li>
<li>Who are the main trading partners?</li>
<li>How’s the picture for China? Import and exports?</li>
<li>A look at the GDP growth</li>
<li>What type of goods are traded?</li>
</ul>
</div>
<div id="un-comtrade" class="section level1">
<h1>UN Comtrade</h1>
<p><a href="https://comtrade.un.org/">UN Comtrade</a> is a repository of official international trade statistics and relevant analytical tables. It allows to view and download detailed global trade data, i.e. imports and exports of all goods or even of specific services or goods (say tomatoes).</p>
<p><a href="https://github.com/ropensci/comtradr">comtradr</a> is a R package and a collection of functions for interacting with the UN Comtrade API. Besides <em>comtradr</em> we use various other packages that we shall load first.</p>
<pre class="r"><code>library(tidyverse)
library(comtradr)
library(visNetwork)
library(grid)
library(png)
library(RCurl)
library(scales)


billion &lt;- function(value) {
  value/1000000000
}</code></pre>
<div id="how-to-use-comtradr" class="section level2">
<h2>How to use comtradr</h2>
<pre class="r"><code>q &lt;- ct_search(reporters = &quot;USA&quot;, 
               partners = c(&quot;Germany&quot;, &quot;France&quot;, &quot;Japan&quot;, &quot;Mexico&quot;), 
               trade_direction = &quot;imports&quot;)</code></pre>
<p>The main function is <code>ct_search()</code>. It accepts the following arguments:</p>
<ul>
<li>reporters: Reporting country, can be “All” (required)
<ul>
<li>can use <code>ct_country_lookup()</code> to look up the name of a country, e.g. <code>ct_country_lookup(&quot;russia&quot;)</code></li>
</ul></li>
<li>partners: Partner country, can be “All (required)</li>
<li>trade_direction: “imports”, “exports”, “re_imports”, “re_exports”. Default value is “all”</li>
<li>freq: “annual” or “monthly”. Default value is “annual”.</li>
<li>start_date: “yyyy” if freq=“annual”, or “yyyy-mm” if freq=“monthly”, can be “all” (default)</li>
<li>end_date: same</li>
<li>commod_codes: character vector of commodity codes, or “TOTAL” (default)
<ul>
<li>use <code>ct_commodity_lookup()</code> to look up codes, e.g. <code>tomatoes &lt;- ct_commodity_lookup(&quot;tomato&quot;)</code>.</li>
<li><code>tomatoes</code> can then be used as a variable for the argument</li>
</ul></li>
<li>max_rec: max. number of records, 50’000 without API token, 250’000 with (see also <code>ct_register_token()</code>)</li>
<li>type: “goods” or “services”. Default value is “goods”.</li>
<li>url: not needed</li>
</ul>
<p>Without API token you got 100 requests per day, check how many are left with <code>ct_get_remaining_hourly_queries()</code>.</p>
<pre class="r"><code>q %&gt;% glimpse()</code></pre>
<pre><code>## Observations: 112
## Variables: 35
## $ classification         &lt;chr&gt; &quot;H5&quot;, &quot;H5&quot;, &quot;H5&quot;, &quot;H5&quot;, &quot;H5&quot;, &quot;H5&quot;, &quot;H5&quot;,…
## $ year                   &lt;int&gt; 2017, 2017, 2017, 2017, 2018, 2018, 2018,…
## $ period                 &lt;int&gt; 2017, 2017, 2017, 2017, 2018, 2018, 2018,…
## $ period_desc            &lt;chr&gt; &quot;2017&quot;, &quot;2017&quot;, &quot;2017&quot;, &quot;2017&quot;, &quot;2018&quot;, &quot;…
## $ aggregate_level        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
## $ is_leaf_code           &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
## $ trade_flow_code        &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ trade_flow             &lt;chr&gt; &quot;Import&quot;, &quot;Import&quot;, &quot;Import&quot;, &quot;Import&quot;, &quot;…
## $ reporter_code          &lt;int&gt; 842, 842, 842, 842, 842, 842, 842, 842, 8…
## $ reporter               &lt;chr&gt; &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;,…
## $ reporter_iso           &lt;chr&gt; &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;, &quot;USA&quot;,…
## $ partner_code           &lt;int&gt; 251, 276, 392, 484, 251, 276, 392, 484, 2…
## $ partner                &lt;chr&gt; &quot;France&quot;, &quot;Germany&quot;, &quot;Japan&quot;, &quot;Mexico&quot;, &quot;…
## $ partner_iso            &lt;chr&gt; &quot;FRA&quot;, &quot;DEU&quot;, &quot;JPN&quot;, &quot;MEX&quot;, &quot;FRA&quot;, &quot;DEU&quot;,…
## $ second_partner_code    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ second_partner         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ second_partner_iso     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ customs_proc_code      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ customs                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ mode_of_transport_code &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ mode_of_transport      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ commodity_code         &lt;chr&gt; &quot;TOTAL&quot;, &quot;TOTAL&quot;, &quot;TOTAL&quot;, &quot;TOTAL&quot;, &quot;TOTA…
## $ commodity              &lt;chr&gt; &quot;All Commodities&quot;, &quot;All Commodities&quot;, &quot;Al…
## $ qty_unit_code          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ qty_unit               &lt;chr&gt; &quot;No Quantity&quot;, &quot;No Quantity&quot;, &quot;No Quantit…
## $ alt_qty_unit_code      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ alt_qty_unit           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ qty                    &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, NA, NA, NA, NA, N…
## $ alt_qty                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ netweight_kg           &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, NA, NA, NA, NA, N…
## $ gross_weight_kg        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ trade_value_usd        &lt;dbl&gt; 50036407688, 119991393155, 139797020593, …
## $ cif_trade_value_usd    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ fob_trade_value_usd    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
## $ flag                   &lt;int&gt; 4, 4, 4, 4, 4, 4, 4, 4, 0, 0, 0, 0, 0, 0,…</code></pre>
<pre class="r"><code>q %&gt;% 
  as_tibble() %&gt;% 
  filter(reporter == &quot;USA&quot;, partner %in% c(&quot;Germany&quot;, &quot;Mexico&quot;)) %&gt;% 
  select(trade_value_usd, reporter, partner, everything()) %&gt;% 
  ggplot(aes(x = year, y = trade_value_usd/1000000000, fill = partner)) +
  geom_col(alpha = 0.6, position = &quot;dodge&quot;) +
  scale_y_continuous(labels = scales::number) +
  scale_x_continuous(breaks = seq(1990, 2018, 2)) +
  labs(title = &quot;US imports from Germany and from Mexico&quot;, y = &quot;billion USD&quot;) +
  theme_bw()</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/sample2-1.png" width="672" /></p>
</div>
</div>
<div id="usa-international-trade" class="section level1">
<h1>USA international trade</h1>
<div id="load-comtrade-data" class="section level2">
<h2>Load Comtrade data</h2>
<pre class="r"><code>us1 &lt;- ct_search(reporters = &quot;USA&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2018-4),
                 end_date = 2018)

us2 &lt;- ct_search(reporters = &quot;USA&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2013-4),
                 end_date = 2013)

us3 &lt;- ct_search(reporters = &quot;USA&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2008-4),
                 end_date = 2008)

us4 &lt;- ct_search(reporters = &quot;USA&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2003-4),
                 end_date = 2003)

us5 &lt;- ct_search(reporters = &quot;USA&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (1998-4),
                 end_date = 1998)

us &lt;- bind_rows(us1, us2, us3, us4, us5) %&gt;% distinct()

us %&gt;% saveRDS(&quot;data/us.RDS&quot;)</code></pre>
</div>
<div id="balance-of-trade" class="section level2">
<h2>Balance of trade</h2>
<pre class="r"><code>data1 &lt;- us %&gt;% #distinct() %&gt;% 
  filter(partner_iso != &quot;WLD&quot;) %&gt;% 
  mutate(trade_value_usd_bn = billion(trade_value_usd)) %&gt;% 
  group_by(trade_flow, year) %&gt;% 
  summarise(trade_value_usd_bn = sum(trade_value_usd_bn, na.rm = T))

data1 %&gt;% 
  ggplot(aes(x = year, y = trade_value_usd_bn, color = trade_flow)) +
  # geom_area(alpha = 0.1, position = &quot;identity&quot;) +
  geom_line() +
  geom_point() +
  scale_y_continuous(labels = scales::number, breaks = seq(0, 2500, 500)) +
  scale_color_manual(values = c(&quot;#88be3f&quot;, &quot;#02a7eb&quot;)) +
  scale_x_continuous(breaks = seq(1990, 2018, 2), expand = c(0.01, 0.01)) +
  labs(title = &quot;USA import and exports over time&quot;,
       x = &quot;&quot;, y = &quot;trade value in billion USD&quot;, caption = &quot;Data: UN Comtrade&quot;, color = &quot;&quot;, fill = &quot;&quot;)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/devus-1.png" width="672" /></p>
<p>In 2018 the balance of trade <em>in goods</em> was in deficit by -933.</p>
<p>Current account? What about services?</p>
<pre class="r"><code>srv &lt;- ct_search(reporters = &quot;USA&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 type = &quot;services&quot;,
                 freq = &quot;annual&quot;,
                 start_date = (2018-4),
                 end_date = 2018)

# srv %&gt;% saveRDS(&quot;data/srv.RDS&quot;)</code></pre>
<pre class="r"><code>services &lt;- srv %&gt;% as_tibble() %&gt;% 
  filter(partner == &quot;World&quot;) %&gt;% 
  group_by(year, trade_flow) %&gt;% 
  summarise(trade_value_usd_bn = sum(trade_value_usd)/1000000000) %&gt;% 
  spread(trade_flow, trade_value_usd_bn)</code></pre>
<p>Of course, there’s more to the current account than just the trade in good. There’s trade in services, the countrie’s income abroad, and current transfers. For the former we have the latest data from Cometrade dates from 2016. The US imported services of 496 billion USD while it exported services for 727 bn USD.</p>
<p>To put this into perspective, the balance of trade in goods was at -783. The balance of trade goods <em>and</em> services would therefore be . bn USD (2016).</p>
<p>We shall focus on the exchange of goods in the following.</p>
</div>
<div id="trading-partners" class="section level2">
<h2>Trading partners</h2>
<p>Who are the US’ main trading partners?</p>
<p>Prepare a function <code>trade_plot()</code> for plotting the trade data.</p>
<pre class="r"><code># function similar to annotation_custom() but specifying data
annotation_custom2 &lt;- function (grob, xmin = -Inf, xmax = Inf, 
                            ymin = -Inf, ymax = Inf, 
                            data) {
  layer(data = data, 
        stat = StatIdentity, 
        position = PositionIdentity,
        geom = ggplot2:::GeomCustomAnn,
        inherit.aes = TRUE, params = list(grob = grob, 
                                          xmin = xmin, xmax = xmax, 
                                          ymin = ymin, ymax = ymax))
}

percent2 &lt;- function(input) {
  if (is.numeric(input)) {
    output &lt;- percent(input)
  } else {
    output &lt;- input
  }
  return(output)
}

number2 &lt;- function(input) {
  if (is.numeric(input)) {
    output &lt;- number(input)
  } else {
    output &lt;- input
  }
  return(output)
}

trade_plot &lt;- function(data, yr = 2018, top_n = 8, include_others = T, include_flags = T, include_share = T, title = &quot;USA import and exports&quot;) {
  
  if (top_n) {
    o &lt;- &quot;Others&quot;
  } else {
    o &lt;- &quot;Rest of the world&quot;
  }
  
  top_partners &lt;- data %&gt;% 
    filter(partner_iso != &quot;WLD&quot;, year == year) %&gt;% 
    group_by(partner_iso) %&gt;% 
    tally(trade_value_usd, sort = T) %&gt;% 
    top_n(top_n) %&gt;% 
    pull(partner_iso)
  
  if (include_others) {
    others &lt;- data %&gt;% 
      filter(year == yr, !(partner_iso %in% top_partners), partner_iso != &quot;WLD&quot;) %&gt;% 
      group_by(trade_flow) %&gt;% 
      summarise(trade_value_usd = sum(trade_value_usd)) %&gt;% 
      mutate(partner_iso = o, partner = o, year = yr)
    
    toplot &lt;- data %&gt;% 
      filter(year == yr, partner_iso %in% top_partners) %&gt;% 
      bind_rows(others) %&gt;% 
      mutate(partner_iso_fac = factor(partner_iso, levels = c(top_partners, o)))

  } else {
    toplot &lt;- data %&gt;% 
      filter(year == yr, partner_iso %in% top_partners) %&gt;% 
      mutate(partner_iso_fac = factor(partner_iso, levels = c(top_partners)))
  }
    
  toplot &lt;- toplot %&gt;% 
    ungroup() %&gt;% 
    mutate(trade_value_usd_bn = billion(trade_value_usd))
  
  if (include_share) {
    toplot &lt;- toplot %&gt;% 
      group_by(trade_flow) %&gt;% 
      mutate(share_of_total = trade_value_usd_bn/sum(trade_value_usd_bn)) %&gt;% 
      ungroup()
  } else {
    toplot &lt;- toplot %&gt;% 
      mutate(share_of_total = &quot;&quot;)
  }
    
  
  p &lt;- toplot %&gt;% 
    group_by(partner_iso, trade_flow) %&gt;% 
    mutate(label_pos = max(trade_value_usd_bn/2, 100)) %&gt;%
    ungroup() %&gt;% 
    ggplot(aes(y = trade_value_usd_bn, x = trade_flow, fill = trade_flow)) +
    geom_col() +
    geom_text(aes(label = number(trade_value_usd_bn, big.mark = &quot;&#39;&quot;), y = label_pos), size = 3) +
    geom_text(aes(label = percent2(share_of_total), 
                  y = max(trade_value_usd_bn)*0.9), size = 2.5, hjust = -0.2) +
    facet_wrap(~partner_iso_fac, dir = &quot;h&quot;, 
               nrow = max(1, ceiling(sqrt(top_n)), na.rm = T), 
               # ncol = max(1, ceiling((top_n+include_others)/ceiling(sqrt(top_n))), na.rm = T)
               ) +
    scale_fill_manual(values = c(&quot;#88be3f&quot;, &quot;#02a7eb&quot;))
  
  if (include_flags) {
    countries_annotate &lt;- toplot %&gt;% 
      select(partner_iso, partner) %&gt;% 
      distinct() %&gt;% 
      mutate(path = paste0(&quot;./postdata/china-us-trade/flags/&quot;, str_replace_all(partner, &quot; &quot;, &quot;_&quot;), &quot;.png&quot;))
    
    max_y &lt;- max(toplot$trade_value_usd_bn, na.rm = T)
    
    for (i in 1:top_n) {
      if (!top_n) { next() }
      data_annotate &lt;- tibble(partner_iso_fac = factor(countries_annotate[i, &quot;partner_iso&quot;], levels = c(top_partners, o)), 
                              trade_flow = &quot;Export&quot;, trade_value_usd_bn = 1)
      if (file.exists(pull(countries_annotate[i, &quot;path&quot;]))) {
        # print(paste0(pull(countries_annotate[i, &quot;path&quot;]), &quot; exists and should be plotted&quot;))
        img &lt;- readPNG(pull(countries_annotate[i, &quot;path&quot;]))
        
        p &lt;- p + 
          annotation_custom2(rasterGrob(img, interpolate=TRUE), 
                             ymax = max_y, ymin = max_y*0.8, 
                             xmin = -1, data = data_annotate)
      } else {
          next()
        }
    }
  }
  p &lt;- p + 
    labs(x = &quot;&quot;, y = &quot;&quot;,
         title = title, subtitle = paste0(&quot;trade value in goods in billion USD, year: &quot;, yr),
         caption = &quot;Data: UN Comtrade&quot;) +
    theme(legend.position = &quot;none&quot;) #+
    # theme_bw()
  
  return(p)
}</code></pre>
<p>Again here’s the total import and exports for the year 2018.</p>
<pre class="r"><code>trade_plot(us, top_n = 0, include_others = T, include_flags = T, include_share = F)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/totaltrade-1.png" width="384" /></p>
<p>Let’s see the 24 top trading parters</p>
<pre class="r"><code># trade_plot(us, top_n = 25, include_others = F, include_flags = T)

trade_plot(us, top_n = 24, include_others = T, include_flags = T, include_share = T)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/tradeplots1-1.png" width="768" /></p>
<p>Immediately visible are the imports from China. With 563 bn USD. That’s 21.5% of all US imports. Exports to China (120 bn USD) only account for 7.23% of all exports.</p>
</div>
<div id="over-time" class="section level2">
<h2>Over time</h2>
<p>The increase in imports from China is a recent phenomena. It has a lot China economic catching up with the west. See <a href="https://en.wikipedia.org/wiki/History_of_the_People%27s_Republic_of_China_(2002%E2%80%93present)">recent history on Wikipedia</a>.</p>
<p>Here’s the imports from the 5 todays major trading partners:</p>
<pre class="r"><code>top_5 &lt;- us %&gt;% 
  filter(partner_iso != &quot;WLD&quot;, year == 2018) %&gt;% 
  group_by(partner_iso) %&gt;% 
  tally(trade_value_usd, sort = T) %&gt;% 
  top_n(5) %&gt;% 
  pull(partner_iso)

us %&gt;% 
  filter(partner_iso %in% top_5, trade_flow == &quot;Import&quot;) %&gt;% 
  ggplot(aes(x = year, y = billion(trade_value_usd), color = partner_iso)) +
  geom_line() +
  scale_x_continuous(breaks = seq(1992, 2018, 2)) +
  labs(title = &quot;US imports of the current top-5 trading partners&quot;,
       x = &quot;&quot;, y = &quot;trade value in billion USD&quot;, color = &quot;&quot;,
       caption = &quot;Date: UN Comtrade&quot;)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/major5-1.png" width="672" /></p>
<p>It’s also interesting to view it as share of total imports.</p>
<pre class="r"><code>top_5 &lt;- us %&gt;% 
  filter(partner_iso != &quot;WLD&quot;, year == 2018) %&gt;% 
  group_by(partner_iso) %&gt;% 
  tally(trade_value_usd, sort = T) %&gt;% 
  top_n(5) %&gt;% 
  pull(partner_iso)

us %&gt;% 
  filter(partner_iso != &quot;WLD&quot;, trade_flow == &quot;Import&quot;) %&gt;% 
  group_by(year) %&gt;% 
  mutate(share_of_total = trade_value_usd/sum(trade_value_usd)) %&gt;% 
  ungroup() %&gt;% 
  filter(partner_iso %in% top_5, trade_flow == &quot;Import&quot;) %&gt;% 
  ggplot(aes(x = year, y = share_of_total, color = partner_iso)) +
  geom_line() +
  scale_x_continuous(breaks = seq(1992, 2018, 2)) +
  scale_y_continuous(labels = scales::percent, breaks = seq(0.04, 0.5, by = 0.02)) +
  labs(title = &quot;US imports of the current top-5 trading partners (relative)&quot;,
       x = &quot;&quot;, y = &quot;share of all imports&quot;, color = &quot;&quot;,
       caption = &quot;Date: UN Comtrade&quot;)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/major5share-1.png" width="672" /></p>
</div>
</div>
<div id="china-international-trade" class="section level1">
<h1>China international trade</h1>
<p>How does the situation look like from the point of view of China? How much do Chinese rely on the US?</p>
<div id="data" class="section level2">
<h2>Data</h2>
<pre class="r"><code>ch1 &lt;- ct_search(reporters = &quot;China&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2018-4),
                 end_date = 2018)

ch2 &lt;- ct_search(reporters = &quot;China&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2013-4),
                 end_date = 2013)

ch3 &lt;- ct_search(reporters = &quot;China&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2008-4),
                 end_date = 2008)

ch4 &lt;- ct_search(reporters = &quot;China&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (2003-4),
                 end_date = 2003)

ch5 &lt;- ct_search(reporters = &quot;China&quot;, 
                 partners = &quot;All&quot;, 
                 trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                 freq = &quot;annual&quot;,
                 start_date = (1998-4),
                 end_date = 1998)

ch &lt;- bind_rows(ch1, ch2, ch3, ch4, ch5) %&gt;% distinct()

# ch %&gt;% saveRDS(&quot;data/ch.RDS&quot;)</code></pre>
<p>Note that the most recent annual data for China is 2017.</p>
</div>
<div id="imports-and-exports" class="section level2">
<h2>Imports and exports</h2>
<pre class="r"><code>trade_plot(ch, yr = 2017, top_n = 0, include_others = T, include_flags = T, include_share = F)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/totaltradechina-1.png" width="384" /></p>
<pre class="r"><code>trade_plot(ch, yr = 2017, top_n = 24, include_others = T, include_flags = T, include_share = T, title = &quot;China imports and exports&quot;)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/tradeplot2-1.png" width="768" /></p>
</div>
</div>
<div id="development-over-time" class="section level1">
<h1>Development over time</h1>
<pre class="r"><code># CHINA or MEXICO trade with US

data1 &lt;- us %&gt;% #distinct() %&gt;% 
  filter(partner_iso == &quot;WLD&quot;) %&gt;% 
  mutate(trade_value_usd_bn = billion(trade_value_usd)) %&gt;% 
  group_by(trade_flow, year) %&gt;% 
  summarise(trade_value_usd_bn = sum(trade_value_usd_bn, na.rm = T))

# data1 %&gt;% 
#   ggplot(aes(x = year, y = trade_value_usd_bn, color = trade_flow, fill = trade_flow)) +
#   geom_area(alpha = 0.1, position = &quot;identity&quot;) +
#   geom_point() +
#   scale_y_continuous(labels = scales::number, breaks = seq(0, 250, 50)) +
#   scale_color_manual(values = c(&quot;#88be3f&quot;, &quot;#02a7eb&quot;)) +
#   scale_x_continuous(breaks = seq(1990, 2018, 2), expand = c(0.01, 0.01)) +
#   labs(title = &quot;USA import and exports over time&quot;,
#        x = &quot;&quot;, y = &quot;trade value in billion USD&quot;, caption = &quot;Data: UN Comtrade&quot;, color = &quot;&quot;, fill = &quot;&quot;)


data2 &lt;- ch %&gt;% #distinct() %&gt;% 
  filter(partner_iso != &quot;WLD&quot;) %&gt;% 
  mutate(trade_value_usd_bn = billion(trade_value_usd)) %&gt;% 
  group_by(trade_flow, year) %&gt;% 
  summarise(trade_value_usd_bn = sum(trade_value_usd_bn, na.rm = T))

# data2 %&gt;% 
#   ggplot(aes(x = year, y = trade_value_usd_bn, color = trade_flow, fill = trade_flow)) +
#   geom_area(alpha = 0.1, position = &quot;identity&quot;) +
#   geom_point() +
#   scale_y_continuous(labels = scales::number, breaks = seq(0, 2500, 500)) +
#   scale_color_manual(values = c(&quot;#88be3f&quot;, &quot;#02a7eb&quot;)) +
#   scale_x_continuous(breaks = seq(1990, 2018, 2), expand = c(0.01, 0.01)) +
#   labs(title = &quot;USA import and exports over time&quot;,
#        x = &quot;&quot;, y = &quot;trade value in billion USD&quot;, caption = &quot;Data: UN Comtrade&quot;, color = &quot;&quot;, fill = &quot;&quot;)

bind_rows(
  data1 %&gt;% mutate(reporter = &quot;USA&quot;),
  data2 %&gt;% mutate(reporter = &quot;China&quot;)
) %&gt;% 
  ggplot(aes(x = year, y = trade_value_usd_bn, color = interaction(trade_flow, reporter), fill = interaction(trade_flow, reporter))) +
  geom_line() +
  # geom_area(alpha = 0.1, position = &quot;identity&quot;) +
  geom_point(aes(shape = reporter)) +
  geom_vline(xintercept = 2007, alpha = 0.3) +
  geom_text(label = &quot;China exports &gt; US exports&quot;, x = 2007, y = 0, inherit.aes = F, color = &quot;grey&quot;, 
            angle = 90, vjust = 1, hjust = -0.05) +
  scale_y_continuous(labels = scales::number, breaks = seq(0, 2500, 500)) +
  scale_color_manual(values = c(&quot;#ca0020&quot;, &quot;#f4a582&quot;, &quot;#0571b0&quot;, &quot;#92c5de&quot;)) +
  scale_x_continuous(breaks = seq(1990, 2018, 2), expand = c(0.01, 0.01)) +
  scale_shape(guide = &quot;none&quot;) +
  labs(title = &quot;USA and China world trade over time&quot;,
       x = &quot;&quot;, y = &quot;trade value in billion USD&quot;, caption = &quot;Data: UN Comtrade&quot;, color = &quot;&quot;, fill = &quot;&quot;)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/devmx-1.png" width="672" /></p>
<pre class="r"><code># # There are libraries for loading data from World Bank Indicators, but I encountered issues.
# # Therefore we shall download data from https://databank.worldbank.org/data/reports.aspx?source=2&amp;series=NY.GDP.MKTP.CD#
# library(WDI)
# library(wbstats)

gdp &lt;- read_csv(&quot;postdata/china-us-trade/gdp.csv&quot;)

gdp &lt;- gdp %&gt;% 
  filter(str_detect(`Series Name`, &quot;GDP&quot;)) %&gt;%
  select(-`2018 [YR2018]`) %&gt;% 
  gather(year, gdp, -`Series Name`, -`Series Code`, -`Country Name`, -`Country Code`) %&gt;% 
  select(-`Series Name`, -`Series Code`) %&gt;% 
  mutate(year = str_sub(year, 1, 4) %&gt;% as.integer(),
         gdp_label = ifelse(year == 2017, number2(billion(gdp)), &quot;&quot;))

gdp %&gt;% 
  ggplot(aes(x = year, y = billion(gdp), color = `Country Name`)) +
  geom_line() +
  scale_color_manual(values = c(&quot;red&quot;, &quot;blue&quot;)) +
  scale_y_continuous(labels = scales::number, breaks = seq(0, 20000, by = 2500)) +
  scale_x_continuous(breaks = seq(1968, 2018, by = 4)) +
  geom_vline(xintercept = 1976, color = &quot;grey&quot;) +
  geom_text(label = &quot;end of Mao era&quot;, x = 1976, y = 0, inherit.aes = F, color = &quot;grey&quot;,
            angle = 90, vjust = 1, hjust = -1) +
  geom_vline(xintercept = 1989, color = &quot;grey&quot;) +
  geom_text(label = &quot;China rising power&quot;, x = 1989, y = 0, inherit.aes = F, color = &quot;grey&quot;,
            angle = 90, vjust = 1, hjust = -1) +
  geom_vline(xintercept = 2008, color = &quot;grey&quot;) +
  geom_text(label = &quot;2008 Olympics Beijing&quot;, x = 2008, y = 0, inherit.aes = F, color = &quot;grey&quot;,
            angle = 90, vjust = 1, hjust = -1) +
  geom_vline(xintercept = 2012.7, color = &quot;grey&quot;) +
  geom_text(label = &quot;Xi Jinping&quot;, x = 2012.7, y = 0, inherit.aes = F, color = &quot;grey&quot;,
            angle = 90, vjust = 1, hjust = -1) +
  geom_text(aes(label = gdp_label)) +
  labs(title = &quot;GDP over time&quot;,
       subtitle = &quot;China and USA, unadjusted&quot;,
       x = &quot;&quot;, y = &quot;GDP in billion USD&quot;,
       color = &quot;&quot;,
       caption = &quot;Data: World Bank Indicators&quot;)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/gdp-1.png" width="672" /></p>
</div>
<div id="a-look-at-the-goods" class="section level1">
<h1>A look at the goods</h1>
<p>What goods do the USA import from China?</p>
<pre class="r"><code>com1 &lt;- tibble()

for (i in 0:4) {
  codes &lt;- c(1:20) + i*20
  
  com1 &lt;- com1 %&gt;% 
    bind_rows(ct_search(reporters = &quot;USA&quot;, 
                        partners = &quot;China&quot;, 
                        start_date = &quot;2018&quot;,
                        end_date = &quot;2018&quot;,
                        trade_direction = c(&quot;imports&quot;, &quot;exports&quot;),
                        commod_codes = str_pad(codes, 2, &quot;left&quot;, &quot;0&quot;)))
  
  print(&quot;sleep 10 secs&quot;)
  Sys.sleep(10)
}

com %&gt;% saveRDS(&quot;data/com.RDS&quot;)</code></pre>
<pre class="r"><code>top_com &lt;- com %&gt;% 
  group_by(commodity) %&gt;% 
  tally(trade_value_usd, sort = T) %&gt;% 
  top_n(10) %&gt;% 
  pull(commodity)

others &lt;- com %&gt;% 
  filter(!(commodity %in% top_com)) %&gt;% 
  group_by(trade_flow) %&gt;% 
  summarise(trade_value_usd = sum(trade_value_usd)) %&gt;% 
  mutate(commodity = &quot;Others&quot;)
  
com %&gt;% 
  filter(commodity %in% top_com) %&gt;% 
  bind_rows(others) %&gt;% 
  mutate(trade_value_usd_bn = billion(trade_value_usd)) %&gt;% 
  select(trade_flow, trade_value_usd_bn, commodity) %&gt;% 
  # arrange(-trade_value_usd) %&gt;% 
  ggplot(aes(y = trade_value_usd_bn, x = trade_flow,  fill = factor(str_sub(commodity, 1, 35), levels = str_sub(c(top_com, &quot;Others&quot;), 1, 35)))) +
  geom_col() +
  geom_text(aes(label = number(trade_value_usd_bn)), position = position_stack(vjust = .5)) +
  scale_fill_brewer(palette = &quot;Set3&quot;) +
  scale_y_continuous(labels = scales::number) +
  labs(title = &quot;Classification by goods traded&quot;,
       subtitle = &quot;reporter: USA, partner: China, year 2018&quot;,
       x = &quot;&quot;, y = &quot;Cumulated trade value in billion USD&quot;,
       fill = &quot;&quot;,
       caption = &quot;Data: UN Comtrade&quot;)</code></pre>
<p><img src="/post/china-us-trade_files/figure-html/whatgoods2-1.png" width="672" /></p>
</div>
<div id="extras" class="section level1">
<h1>Extras</h1>
<div id="network-graph" class="section level2">
<h2>Network graph</h2>
<p>Let’s make a <a href="https://datastorm-open.github.io/visNetwork/">visNetwork</a> graph.</p>
<pre class="r"><code>data &lt;- us %&gt;% filter(year == 2018, partner != &quot;World&quot;)

edges &lt;- bind_rows(
  # exports
  data %&gt;% 
    filter(trade_flow == &quot;Export&quot;) %&gt;% 
    select(from = reporter, to = partner, value = trade_value_usd) %&gt;% 
    arrange(desc(value)),
  
  # imports
  data %&gt;% 
    filter(trade_flow == &quot;Import&quot;) %&gt;% 
    select(from = partner, to = reporter, value = trade_value_usd) %&gt;% 
    arrange(desc(value))
) %&gt;% 
  mutate(title = paste0(&quot;bn$&quot;, number(value/1000000000)))

cutoff &lt;- 38000000000

nodes &lt;- bind_rows(
  edges %&gt;% 
    filter(value &gt;= cutoff) %&gt;% 
    select(id = from),
  edges %&gt;% 
    filter(value &gt;= cutoff) %&gt;% 
    select(id = to)
) %&gt;% 
  unique() %&gt;% 
  left_join(data %&gt;% filter(year == 2018) %&gt;% select(id = partner, label = partner_iso) %&gt;% unique()) %&gt;% 
  mutate(shape = &quot;circularImage&quot;, image = paste0(&quot;./postdata/china-us-trade/flags/&quot;, str_replace_all(id, &quot; &quot;, &quot;_&quot;), &quot;.png&quot;))
  
visNetwork(nodes, edges, width = &quot;100%&quot;) %&gt;% 
  visEdges(arrows = &quot;from&quot;)</code></pre>
<div id="htmlwidget-1" style="width:100%;height:480px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"nodes":{"id":["USA","China","Mexico","Canada","Japan","Germany","Rep. of Korea","United Kingdom","Ireland","India","Italy","France","Viet Nam","Other Asia, nes","Switzerland","Malaysia","Netherlands","Brazil"],"label":[null,"CHN","MEX","CAN","JPN","DEU","KOR","GBR","IRL","IND","ITA","FRA","VNM",null,"CHE","MYS","NLD","BRA"],"shape":["circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage","circularImage"],"image":["./postdata/china-us-trade/flags/USA.png","./postdata/china-us-trade/flags/China.png","./postdata/china-us-trade/flags/Mexico.png","./postdata/china-us-trade/flags/Canada.png","./postdata/china-us-trade/flags/Japan.png","./postdata/china-us-trade/flags/Germany.png","./postdata/china-us-trade/flags/Rep._of_Korea.png","./postdata/china-us-trade/flags/United_Kingdom.png","./postdata/china-us-trade/flags/Ireland.png","./postdata/china-us-trade/flags/India.png","./postdata/china-us-trade/flags/Italy.png","./postdata/china-us-trade/flags/France.png","./postdata/china-us-trade/flags/Viet_Nam.png","./postdata/china-us-trade/flags/Other_Asia,_nes.png","./postdata/china-us-trade/flags/Switzerland.png","./postdata/china-us-trade/flags/Malaysia.png","./postdata/china-us-trade/flags/Netherlands.png","./postdata/china-us-trade/flags/Brazil.png"]},"edges":{"from":["USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","China","Mexico","Canada","Japan","Germany","Rep. of Korea","United Kingdom","Ireland","India","Italy","France","Viet Nam","Other Asia, nes","Switzerland","Malaysia","Thailand","Brazil","Singapore","Netherlands","Saudi Arabia","Israel","Indonesia","Russian Federation","Belgium","Spain","Colombia","Austria","Venezuela","Philippines","Sweden","Chile","Iraq","Turkey","Australia","Denmark","South Africa","Poland","Peru","Finland","Ecuador","Norway","China, Hong Kong SAR","Bangladesh","Nigeria","Dominican Rep.","United Arab Emirates","Hungary","Czechia","Costa Rica","Argentina","Honduras","Algeria","Guatemala","New Zealand","Slovakia","Portugal","Cambodia","Trinidad and Tobago","Pakistan","Nicaragua","Sri Lanka","Angola","Romania","Egypt","El Salvador","Kuwait","Jordan","Greece","Morocco","Qatar","Libya","Kazakhstan","Ukraine","Lithuania","Oman","Côte d'Ivoire","Bahrain","Bulgaria","Haiti","Estonia","Madagascar","Slovenia","Latvia","Tunisia","Kenya","Ghana","Equatorial Guinea","Luxembourg","Uruguay","Azerbaijan","Myanmar","Chad","Bolivia (Plurinational State of)","Croatia","Panama","Botswana","Iceland","Ethiopia","Congo","Lesotho","Belarus","Jamaica","Bahamas","North Macedonia","Serbia","Mauritius","Gabon","Fiji","Guyana","Cameroon","Belize","Malta","Georgia","Zambia","Lao People's Dem. Rep.","Faeroe Isds","Paraguay","Senegal","Namibia","Mozambique","Lebanon","Curaçao","Bosnia Herzegovina","Nepal","China, Macao SAR","Brunei Darussalam","United Rep. of Tanzania","Saint Maarten","Papua New Guinea","Suriname","Zimbabwe","Uganda","Iran","Albania","Cyprus","Rwanda","Liberia","Rep. of Moldova","Malawi","New Caledonia","Barbados","Sierra Leone","Armenia","Saint Kitts and Nevis","Dem. Rep. of the Congo","Djibouti","French Polynesia","Maldives","Br. Virgin Isds","Cayman Isds","Aruba","Afghanistan","Niger","Saint Lucia","Marshall Isds","Benin","Uzbekistan","Bermuda","Grenada","Sudan","Greenland","Andorra","Saint Helena","Burundi","Mauritania","Togo","Swaziland","Falkland Isds (Malvinas)","San Marino","Turkmenistan","Mongolia","Turks and Caicos Isds","Tokelau","Seychelles","Kyrgyzstan","Timor-Leste","Samoa","Vanuatu","Guinea","Syria","Saint Vincent and the Grenadines","State of Palestine","Burkina Faso","Anguilla","Antigua and Barbuda","Mali","Montenegro","Solomon Isds","Tonga","Cabo Verde","Kiribati","Comoros","Central African Rep.","Cocos Isds","Nauru","Yemen","Montserrat","Palau","Dominica","Cuba","Somalia","Cook Isds","Christmas Isds","FS Micronesia","Holy See (Vatican City State)","Bhutan","Tajikistan","Sao Tome and Principe","Norfolk Isds","Gambia","Gibraltar","Niue","Eritrea","Guinea-Bissau","Br. Indian Ocean Terr.","Tuvalu","Heard Island and McDonald Islands","Western Sahara","Fr. South Antarctic Terr.","South Sudan","Wallis and Futuna Isds","Pitcairn","Saint Pierre and Miquelon"],"to":["Canada","Mexico","China","Japan","United Kingdom","Germany","Rep. of Korea","Netherlands","Brazil","China, Hong Kong SAR","France","Singapore","India","Belgium","Other Asia, nes","Australia","Italy","Switzerland","United Arab Emirates","Chile","Colombia","Israel","Saudi Arabia","Spain","Malaysia","Thailand","Ireland","Turkey","Argentina","Viet Nam","Peru","Philippines","Dominican Rep.","Indonesia","Panama","Russian Federation","Guatemala","Costa Rica","Venezuela","Ecuador","Honduras","South Africa","Norway","Poland","Egypt","Sweden","Qatar","New Zealand","Austria","El Salvador","Bahamas","Czechia","Kuwait","Morocco","Pakistan","Jamaica","Nigeria","Denmark","Ukraine","Oman","Paraguay","Bangladesh","Trinidad and Tobago","Bahrain","Finland","Hungary","Jordan","Nicaragua","Portugal","Uruguay","Haiti","Lebanon","Iraq","Ethiopia","Gibraltar","Algeria","Afghanistan","Romania","Greece","Luxembourg","Cayman Isds","Curaçao","Br. Virgin Isds","Ghana","Kazakhstan","Lithuania","Saint Maarten","Iceland","Croatia","Bermuda","China, Macao SAR","Aruba","Tunisia","Barbados","Bolivia (Plurinational State of)","Saint Lucia","Togo","Guyana","Angola","Dominica","Latvia","Antigua and Barbuda","Georgia","Cambodia","Iran","Belize","Suriname","Sri Lanka","Bulgaria","Kenya","Turks and Caicos Isds","United Rep. of Tanzania","Slovenia","Azerbaijan","Côte d'Ivoire","Estonia","Senegal","Uzbekistan","Marshall Isds","Slovakia","French Polynesia","Cuba","Brunei Darussalam","Myanmar","Benin","Libya","Liberia","Saint Kitts and Nevis","Namibia","Malta","Cameroon","Zambia","Yemen","Mozambique","Serbia","Equatorial Guinea","Belarus","Cyprus","Guinea","Mauritius","Mongolia","Grenada","Anguilla","Gabon","Madagascar","Djibouti","Fiji","Congo","Sudan","Mauritania","Uganda","Papua New Guinea","Saint Vincent and the Grenadines","Botswana","Mali","Dem. Rep. of the Congo","Sierra Leone","New Caledonia","Montenegro","Niger","Burkina Faso","Albania","Bhutan","Nepal","Chad","Syria","Somalia","Armenia","FS Micronesia","Bosnia Herzegovina","Gambia","North Macedonia","Samoa","Maldives","Zimbabwe","Swaziland","Turkmenistan","Rwanda","Tonga","South Sudan","Central African Rep.","Palau","Guinea-Bissau","Montserrat","Malawi","Kyrgyzstan","Lao People's Dem. Rep.","Burundi","Tajikistan","Seychelles","Rep. of Moldova","Solomon Isds","Vanuatu","Br. Indian Ocean Terr.","Cabo Verde","Eritrea","Cook Isds","Greenland","Kiribati","Andorra","Tokelau","Comoros","State of Palestine","Faeroe Isds","Lesotho","Sao Tome and Principe","San Marino","Timor-Leste","Tuvalu","Niue","Wallis and Futuna Isds","Fr. South Antarctic Terr.","Nauru","Christmas Isds","Saint Helena","Cocos Isds","Western Sahara","Falkland Isds (Malvinas)","Norfolk Isds","Holy See (Vatican City State)","Saint Pierre and Miquelon","Heard Island and McDonald Islands","Pitcairn","Dem. People's Rep. of Korea","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA"],"value":[298695310011,265002352782,120341150235,74963593820,66209113405,57233357846,56342226897,49376733002,39494176727,37433647893,37358114452,33123504539,33120074867,31415527991,30242558204,25303622382,23149996409,22246255906,19547095537,15340116104,14996142387,13715175472,13624377293,12975516630,12864601689,12587413354,10686527931,10194019087,9919882731,9683740424,9633776499,8706811342,8561209325,8226195445,6884114975,6667639313,6648946577,6345521489,5861118214,5760421871,5600199225,5517075197,5457176231,5395307928,5056506525,4481396974,4423315970,4057047557,3545619177,3407458971,3091804973,3003519452,2984171244,2945071867,2929193935,2720875956,2668385791,2558884047,2465070314,2421284675,2378909090,2109777902,2109581592,2036542012,1872375886,1750861992,1606494998,1603222944,1463623207,1445478560,1390910871,1317309014,1313195634,1310886716,1290154123,1250222221,1233900863,1108241190,1047644653,1025789129,946701031,851390024,823574654,793031626,729219585,707553374,673459728,644223510,615149296,609217860,601783749,599279051,596611440,589816261,577834228,572946288,563595986,540844912,526550201,518171070,510373928,508599343,478701092,446599955,440464702,403056460,388053338,372158350,370281419,365148185,356445694,335234472,319473585,313384860,311393487,310346874,298592546,296379756,290066444,289007279,287920181,275877982,266707060,263565281,255593009,244117629,217105318,210005430,202648967,200724381,196717530,195371872,195097586,184992530,184623962,139458254,132571822,129620330,127171851,123581929,120919707,119037835,115365671,113030380,112844651,109480171,104997657,100253911,95070915,88167091,87353491,86711959,82343295,81898126,78958947,78869512,71469498,63929746,63343263,61713676,59498247,59247055,55897123,55468425,52681780,50673806,50137865,46996547,46814194,46602450,41419417,41371010,39054159,37719785,33982505,33335483,30903044,25328778,24125609,23493218,22932802,20613540,18555456,17693147,17243215,17021847,15055031,14585766,14374735,14292032,13419039,11720226,10308509,9255785,8560372,8190789,7210537,6724612,4442645,3065762,2922525,2777625,2634979,2409486,2311991,2068258,1567197,1501521,1359004,1260759,1188657,817966,796958,777666,719155,344969,259989,214959,196503,183830,132128,116341,84549,4315,562820470815,349629283159,325271982390,146073588682,128398048579,76227762839,61778060833,57694072164,56504594147,56236372159,53716096338,51317871134,47266773802,41721830874,40161766779,33054944299,32342146028,27523433963,25379634406,24643466023,22171223117,21859705671,21513914539,17888967802,17839773180,14315252077,13773106096,13512982055,12939456439,12656580291,12179322672,12125531424,10902283424,10211705016,9063106589,8651942597,8295457369,8267537195,7361394153,7075989148,7050192162,6456400222,6330524153,5771049253,5448567316,5230806973,5191181783,5168925981,5145994809,5061766737,4939650530,4781625136,4565354953,4366754305,4211525355,4029919298,3972969945,3909481510,3899150614,3687936686,2801172766,2768784968,2677399895,2583515283,2580890475,2125716825,1856491230,1719691346,1629603139,1619414224,1447572243,1431595515,1424947851,1359647666,1348456764,1292057650,1025027175,1019055375,1013516680,983623456,907667020,877288064,745453716,668167423,660878484,613425805,606331712,572355504,533329039,515801072,511513735,494880514,493554217,481148077,479619688,468880702,461232517,458373325,445397605,430274364,417837380,393269506,390336226,361728025,341245620,330058227,299153792,276322900,261765081,229275842,229027050,200871108,198304831,184051021,146398103,140057947,138355327,132109591,120194813,115148075,111912472,107237249,106639160,105253466,104484150,102132227,99465323,96146204,92800373,92344886,79062467,71558560,70685441,70432604,69751835,68383881,65355491,58909454,58892541,57226654,57226147,57163010,55475139,53815293,50279873,48588624,40226392,36506232,33836948,33099546,31661988,30117879,29654977,26665768,23497208,19454319,19016857,18718119,16868503,16578282,16485162,16084305,14233839,14182596,13883054,13820511,13701178,13172826,12144764,12020912,10660153,9926407,9712259,8447648,7739662,7612903,7464684,7450375,6895244,6260600,5603372,5521545,5206121,5184499,4949775,4918681,4735591,4331853,3956236,3709164,3454353,3037612,2978360,2967287,2944959,2229716,1506473,1433362,1406342,1275914,1199879,1178078,936781,923143,903584,842497,759050,747603,742078,601750,479496,367419,294404,197887,118993,99123,99074,94416,26578,21080,20498,18872,15552],"title":["bn$299","bn$265","bn$120","bn$75","bn$66","bn$57","bn$56","bn$49","bn$39","bn$37","bn$37","bn$33","bn$33","bn$31","bn$30","bn$25","bn$23","bn$22","bn$20","bn$15","bn$15","bn$14","bn$14","bn$13","bn$13","bn$13","bn$11","bn$10","bn$10","bn$10","bn$10","bn$9","bn$9","bn$8","bn$7","bn$7","bn$7","bn$6","bn$6","bn$6","bn$6","bn$6","bn$5","bn$5","bn$5","bn$4","bn$4","bn$4","bn$4","bn$3","bn$3","bn$3","bn$3","bn$3","bn$3","bn$3","bn$3","bn$3","bn$2","bn$2","bn$2","bn$2","bn$2","bn$2","bn$2","bn$2","bn$2","bn$2","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$563","bn$350","bn$325","bn$146","bn$128","bn$76","bn$62","bn$58","bn$57","bn$56","bn$54","bn$51","bn$47","bn$42","bn$40","bn$33","bn$32","bn$28","bn$25","bn$25","bn$22","bn$22","bn$22","bn$18","bn$18","bn$14","bn$14","bn$14","bn$13","bn$13","bn$12","bn$12","bn$11","bn$10","bn$9","bn$9","bn$8","bn$8","bn$7","bn$7","bn$7","bn$6","bn$6","bn$6","bn$5","bn$5","bn$5","bn$5","bn$5","bn$5","bn$5","bn$5","bn$5","bn$4","bn$4","bn$4","bn$4","bn$4","bn$4","bn$4","bn$3","bn$3","bn$3","bn$3","bn$3","bn$2","bn$2","bn$2","bn$2","bn$2","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$1","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0","bn$0"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false},"edges":{"arrows":"from"}},"groups":null,"width":"100%","height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>
</div>
</div>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='/tags/r/'>R</a>, <a class='tag' href='/tags/economics/'>economics</a>, <a class='tag' href='/tags/usa/'>USA</a>, <a class='tag' href='/tags/china/'>China</a>, <a class='tag' href='/tags/world-trade/'>world trade</a>, <a class='tag' href='/tags/comtradr/'>comtradr</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/post/github-page/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>How I made this Github page</a>
    </div><div class='next-entry sep-before'>
      <a href='/post/market-june19/'>
        <span class='screen-reader-text'>Next post: </span>The Market as of June 2019, VIX and inverted yield curve<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='mailto:mg@econovo.ch' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://github.com/mgei' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com//' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/martin-geissmann-59034a10b' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li><li>
        <a href='https://www.youtube.com/channel/UCUYqJUnI_P0XYk6_FRyvb2w' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Youtube account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z" />
  <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" />
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2019 Martin Geissmann </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.9e5c4cf4.js'></script><script src='/js/custom.js'></script>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>

</html>

